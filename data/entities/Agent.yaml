tags: [agent]
hitbox:
  - { x: -10, y: -10 }
  - { x: 10, y: -10 }
  - { x: 10, y: 10 }
  - { x: -10, y: 10 }
navHeight: { x: 0, y: 0 }
behavior:
  canBePlayer: yes
  canFly: yes
  moveSpeed: 256
  inventorySlots: 2
  inventorySize: null
model:
  speechBubble:
    origin: speechBubbleOrigin
  skeleton:
    - name: speechBubbleOrigin
      pos: { x: 0, y: -16 }
      render:
        layer: speechBubble
    - name: gazeTarget
      pos: { x: 100, y: 0 }
    - name: bodyPivot
      children:
        - name: body
          render:
            as: sprite
            sprite: agent
            anchor: center
            angle: 90
          ik:
            naturalDirection: { x: 0, y: -1 }
          children:
            - name: rightEyeSocket
              pos: { x: 0, y: -4 }
              children:
                - name: rightEye
                  pos: { x: -1, y: 0 }
                  render: &eye
                    as: rect
                    size: [1, 3]
                    anchor: center
                    color: lime
                  ik:
                    target: [gazeTarget, 1]
            - name: leftEyeSocket
              pos: { x: -4, y: -4 }
              children:
                - name: leftEye
                  pos: { x: -1, y: 0 }
                  render: *eye
                  ik:
                    target: [gazeTarget, 1]
        - name: gazeSource
          pos: { x: 0, y: -5 }
          ik:
            target: [gazeTarget, 1]
  tentacles:
    - &ht
      name: htA
      bone: body
      render:
        color: xt248
        cap: square
        z: -1
      pos: { x: 4, y: -6 }
      n: 3
      lps: 3
      sizes: [3, 1]
      masses: [1, 1]
      gravityIsLocal: yes
      eachConstraints:
        angle: [body, 1, -90]
    - <<: *ht
      name: htB
      pos: { x: 5, y: 2 }
  anims:
    emoHappy:
      channels:
        - target: [body, pos]
          alpha: 200
          keyframes:
            - [0.1, { x: 0, y: 0 }, easeInOutSine]
            - [0.1, { x: -2, y: 0 }, easeInOutSine]
            - [0.1, { x: 0, y: 0 }, easeInOutSine]
            - [0.1, { x: -2, y: 0 }, easeInOutSine]
            - [0.1, { x: 0, y: 0 }]
        - &squishEye
          target: [rightEye, scale]
          alpha: 100
          keyframes:
            - [0.1, { x: 1, y: 1 }]
            - [0.2, { x: 3, y: 0.2 }]
            - [0.1, { x: 3, y: 0.2 }]
            - [0.1, { x: 1, y: 1 }]
        - <<: *squishEye
          target: [leftEye, scale]
hooks:
  load: [do, [wait, 2], [anim, emoHappy]]
